class r{constructor(t){this.routes=[];this.mode="hash";this.root="/";this.addRoute=(t,e)=>(this.routes.push({path:t,callback:e}),this);this.cleanPath=t=>t.toString().replace(/\/$/,"").replace(/^\//,"");this.getCurrentRoute=()=>{let t="";if(this.mode==="history")t=this.cleanPath(decodeURI(window.location.pathname+window.location.search)),t=t.replace(/\?(.*)$/,""),t=this.root!=="/"?t.replace(this.root,""):t;else{const e=window.location.href.match(/#(.*)$/);t=e?e[1]:""}return this.cleanPath(t)};this.initializeNavigationListener=()=>{clearInterval(this.interval),this.interval=setInterval(this.getCustomInterval,50)};this.getCustomInterval=()=>{this.current!==this.getCurrentRoute()&&(this.current=this.getCurrentRoute(),this.routes.some(t=>{const e=this.current.match(t.path);return e?(e.shift(),t.callback.apply({},e),e):!1}))};this.mode=window.history.pushState?"history":"hash",t.mode&&(this.mode=t.mode),t.root&&(this.root=t.root),this.initializeNavigationListener()}}export default r;
